# BLUB Ocean Configuration

ocean:
  size: 100
  tick_interval: 0.1
  density_constant: 7
  active_zone_min: 15

rifts:
  count_per_epoch: 8
  radius: 3
  respawn_interval: 50
  types:
    gold:
      richness: 8000
      depletion_rate: 0.04
      spawn_weight: 0.2
    silver:
      richness: 5000
      depletion_rate: 0.02
      spawn_weight: 0.5
    copper:
      richness: 2000
      depletion_rate: 0.01
      spawn_weight: 0.3

predators:
  base_spawn_rate: 0.30
  sigmoid_K: 12
  kill_radius: 1
  kill_prob_base: 0.8
  confusion_enabled: true
  rift_zone_reduction: 0.6
  failed_attack_penalty: 5
  speed: 1.0
  lifetime: 30
  zone_size: 10
  grace_period: 30
  types:
    shark:
      speed: 1.7
      lethality: 0.80
      lifetime: 30
      spawn_weight: 0.50
      min_rift_distance: 8
      behavior: chase
    eel:
      speed: 0.0
      lethality: 0.60
      lifetime: 50
      spawn_weight: 0.35
      max_rift_distance: 2
      behavior: ambush
      respawn_delay: 10
      attack_radius: 2
    octopus:
      speed: 0.5
      lethality: 0.50
      lifetime: 40
      spawn_weight: 0.15
      behavior: pheromone_follow
      pheromone_weight: 0.6
      pheromone_clear_radius: 3
  min_population_for_predators: 20
  extinction_protection: true

economy:
  total_supply: 1000000000
  epoch_length_ticks: 100
  simulated_epoch_pool: 500000
  sound_credit_cost: 0.5
  sound_cost_2: 1
  death_timeout: 20
  death_credit_penalty: 0.05
  starting_balance: 50000

communication:
  max_message_length: 2
  channel_noise_rate: 0.10
  listener_feedback_frac: 0.30   # speaker gets 30% of listener's rift reward

tiers:
  shrimp:
    min_hold: 0
    vision: 5
    sound_range: 5
  lobster:
    min_hold: 200000
    vision: 8
    sound_range: 8
  kraken:
    min_hold: 500000
    vision: 12
    sound_range: 12

sounds:
  - blub
  - glorp
  - skree
  - klak
  - mrrp
  - woosh
  - pop
  - zzzub
  - frrr
  - tink

agents:
  agent_lifetime: 3000  # ticks (~5 epochs) before retirement & naive replacement

pheromones:
  food_decay_rate: 0.93     # per-tick multiplier for food trails (faster decay)
  danger_decay_rate: 0.97   # per-tick multiplier for danger trails (persists longer)
  diffusion_rate: 0.1       # spread to 4 neighbors per tick
  max_intensity: 10.0
  food_deposit_scale: 0.10  # reward → deposit multiplier (5x for visible trails)
  danger_deposit: 3.0       # fixed deposit on death
  trail_reinforce: 0.05     # positive feedback when lobster follows food trail
  noentry_decay_rate: 0.93              # ~10 tick half-life: covers next-wave arrival window without blocking respawned rifts
  noentry_deposit: 1.5                  # at depleted rifts
  noentry_richness_threshold: 0.85      # rift <85% richness triggers no-entry
  noentry_food_penalty_multiplier: 2.0  # effective = food - noentry * this
  colony_scent_decay_rate: 0.95         # ~14 tick half-life
  colony_scent_deposit: 0.5             # center cell deposit by colony members
  colony_scent_neighbor_deposit: 0.2    # cardinal neighbor deposit (radius-1 spread)
  same_colony_weight: 1.0              # trust own colony food trails
  other_colony_weight: 0.3             # distrust foreign food trails

colonies:
  formation_threshold: 4    # ON — visual colonies, cache OFF
  formation_radius: 3       # max distance between members
  persistence_ticks: 30     # ticks as candidate before promotion
  reward_bonus: 1.5         # 50% rift reward bonus for members
  max_colonies: 5

ablation:
  turnover: true       # agent retirement/replacement
  sound_cost: true     # credits deducted for speaking
  bayesian: true       # Bayesian comprehension in social agents
  inheritance_frac: 0.60  # how much to blend imported knowledge

cultural_cache:
  inheritance_frac: 0.60
  cache_decay_rate: 0.98
  min_agent_age_to_contribute: 300
  contribution_interval: 200
  noise_std: 0.10
  partial_reset_retention: 0.50

language:
  sigma_start: 1.5
  sigma_newborn: 1.0
  sigma_min: 0.5
  sigma_anneal_per_epoch: 0.20
  topo_bonus_scale: 4.0
  weight_decay: 0.9995
  learning_rate: 0.03               # base lr (varied per-agent by 0.7-1.4x)
  causal_influence_coeff: 3.0       # intrinsic reward for speaker influence
  entropy_bonus_coeff: 1.0          # gentle push toward message diversity
  entropy_min_threshold: 1.0        # minimum entropy (bits) before bonus kicks in
  context_mode: "factored"          # "factored" (new) or "legacy" (old 6D vector)
  novelty_holdout_fraction: 0.20    # 20% of feature combos held out
  novelty_holdout_seed: 42          # deterministic selection
  features:
    situation_types: 4
    target_details: 5
    urgency_levels: 3

bottleneck:
  enabled: true
  retirement_interval: 500          # ticks between forced retirements (5 epochs, was 2)
  observation_rate: 0.35            # newborn processes 35% of heard messages
  learning_period: 300              # ticks of filtered observation
  min_agents_for_retirement: 25     # don't retire if population too low
  retire_lowest_earning: true       # retire by credits (false = retire oldest)

specialization:
  enabled: false                   # DISABLED for A/B test vs baseline v1
  initial_threshold: 5.0
  initial_noise: 0.1
  threshold_decrease: 0.05          # on task performance
  threshold_increase: 0.01          # on task skip
  threshold_min: 0.1
  threshold_max: 10.0
  tasks:
    forage:
      stimulus_source: "inverse_credits"
      stimulus_scale: 100.0
    scout:
      stimulus_source: "ticks_since_new_rift"
      stimulus_scale: 200.0
    guard:
      stimulus_source: "recent_deaths"
      stimulus_scale: 10.0
      lookback_ticks: 50
    teach:
      stimulus_source: "newborn_count"
      stimulus_scale: 5.0

tidal:
  enabled: true                    # ON — night hearing fixed to 0.8
  day_night_period: 50             # ticks per full day/night cycle
  day_night_predator_max: 2.0      # night predator spawn multiplier
  day_night_sound_min: 0.8         # night sound range multiplier (was 0.4 — killed CIC)
  tidal_period: 200                # ticks per tidal cycle
  tidal_offset_max: 2              # max rift offset cells at respawn
  seasonal_period: 1000            # ticks per seasonal cycle
  seasonal_min_multiplier: 0.5     # winter richness multiplier

eruptions:
  enabled: true                    # ON — pressure tuned to ~1-2/epoch
  pressure_per_tick: 0.006
  pressure_per_agent: 0.2
  threshold_gold: 1.5
  threshold_silver: 1.0
  threshold_copper: 0.7
  multiplier_gold: 5.0
  multiplier_silver: 3.0
  multiplier_copper: 2.0
  duration_ticks: 20
  cascade_radius: 10
  cascade_chance: 0.30
  cascade_pressure_boost: 0.5
  predator_attract_delay: 20
  predator_attract_radius: 8
  richness_restore_frac: 0.5

colony_cache:
  enabled: false                   # OFF — cache averaging hurts TopSim
  global_deposit_weight: 0.30
  colony_inherit_frac: 0.60
  global_inherit_frac: 0.40
  dormant_ttl: 500
  cache_decay_rate: 0.98

auto_balance:
  enabled: false                   # DISABLED for A/B test vs baseline v1
  coordination_threshold: 0.2
  rift_radius_boost: 1.1
  predator_rate_reduction: 0.8
  richness_boost: 1.3
